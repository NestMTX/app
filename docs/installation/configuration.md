# NestMTX Configuration Options

NestMTX is highly configurable through environment variables, allowing you to customize various aspects of the application, such as database connections, MQTT client settings, Twilio integration for ICE, MediaMTX configurations, and more. While some variables are required, others are optional and provide additional functionality when set.

## Configuration Options

The following table outlines the available environment variables, indicating whether each is required, along with a brief description and the default value if applicable.

| Variable                       | Description                                                                                        | Default Value                                                                                             |
| ------------------------------ | -------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| `NODE_ENV`                     | Specifies the environment mode (development, production, test).                                    | `development`                                                                                             |
| `PORT`                         | The port on which the application will run.                                                        | `2000`                                                                                                    |
| `APP_KEY`                      | The application key used for encryption and security.                                              | `2yHkmRqv832ze68zwyIOtBpwzSHIrVzV`                                                                        |
| `HOST`                         | The host address on which the application will run.                                                | `0.0.0.0`                                                                                                 |
| `LOG_LEVEL`                    | Specifies the logging level for the application.                                                   | `info`                                                                                                    |
| `PINO_PORT`                    | The port for the Pino logger, if applicable.                                                       | `62000`                                                                                                   |
| `DB_CONNECTION`                | The database connection type (`sqlite`, `mysql`, `pg`, `mssql`).                                   | `sqlite`                                                                                                  |
| `DB_HOST`                      | The host address for the database.                                                                 | `localhost`                                                                                               |
| `DB_PORT`                      | The port for the database.                                                                         | When `DB_HOST` = `mysql`: `3306`<br />When `DB_HOST` = `pg`: `5432`<br />When `DB_HOST` = `mssql`: `1143` |
| `DB_USER`                      | The username for the database connection.                                                          | `lucid`                                                                                                   |
| `DB_PASSWORD`                  | The password for the database connection.                                                          | `''`                                                                                                      |
| `DB_NAME`                      | The name of the database to connect to.                                                            | `lucid`                                                                                                   |
| `DB_SECURE`                    | Whether to use a secure connection to the database (`true`/`false`).                               | `false`                                                                                                   |
| `MQTT_PROTOCOL`                | The protocol used for MQTT (`wss`, `ws`, `mqtt`, `mqtts`, etc.).                                   | `mqtt`                                                                                                    |
| `MQTT_HOST`                    | The MQTT broker host address. <br />If set to `:instance:` a local MQTT server will be started     | `:instance:`                                                                                              |
| `MQTT_PORT`                    | The port for the MQTT broker.                                                                      | `1883`                                                                                                    |
| `MQTT_USER`                    | The username for MQTT authentication.                                                              | None                                                                                                      |
| `MQTT_PASS`                    | The password for MQTT authentication.                                                              | None                                                                                                      |
| `TWILIO_ACCOUNT_SID`           | Twilio Account SID used for ICE configuration.                                                     | None                                                                                                      |
| `TWILIO_API_KEY_SID`           | Twilio API Key SID for accessing Twilio services.                                                  | None                                                                                                      |
| `TWILIO_API_KEY_SECRET`        | Twilio API Key Secret for secure access to Twilio services.                                        | None                                                                                                      |
| `IP_PUBLIC_RESOLVED`           | The resolved public IP address of the server. <br />This is required if IP resolution is disabled. | None                                                                                                      |
| `IP_RESOLVERS_ENABLED`         | Whether IP resolution is enabled (`true`/`false`).                                                 | `true`                                                                                                    |
| `IP_LAN_RESOLVED`              | The resolved LAN IP address of the server. <br />This is required if IP resolution is disabled.    | None                                                                                                      |
| `ICE_USE_TWILIO`               | Whether to use Twilio for ICE (`true`/`false`).                                                    | `true`                                                                                                    |
| `MEDIA_MTX_PATH`               | **Required** The file path to the MediaMTX executable.                                             | None                                                                                                      |
| `MEDIA_MTX_CONFIG_PATH`        | **Required** The path to the MediaMTX configuration file.                                          | None                                                                                                      |
| `MEDIA_MTX_API_PORT`           | The port for the MediaMTX API.                                                                     | `9997`                                                                                                    |
| `MEDIA_MTX_PLAYBACK_ENABLED`   | Whether playback is enabled in MediaMTX (`true`/`false`).                                          | `true`                                                                                                    |
| `MEDIA_MTX_RTSP_PLAYBACK_PORT` | The port for RTSP playback in MediaMTX.                                                            | `9996`                                                                                                    |
| `MEDIA_MTX_RTSP_ENABLED`       | Whether RTSP is enabled in MediaMTX (`true`/`false`).                                              | `false`                                                                                                   |
| `MEDIA_MTX_RTMP_ENABLED`       | Whether RTMP is enabled in MediaMTX (`true`/`false`).                                              | `false`                                                                                                   |
| `MEDIA_MTX_HLS_ENABLED`        | Whether HLS is enabled in MediaMTX (`true`/`false`).                                               | `false`                                                                                                   |
| `MEDIA_MTX_HLS_USE_DISK`       | Whether HLS uses disk storage in MediaMTX (`true`/`false`).                                        | `false`                                                                                                   |
| `MEDIA_MTX_WEB_RTC_ENABLED`    | Whether WebRTC is enabled in MediaMTX (`true`/`false`).                                            | `false`                                                                                                   |
| `MEDIA_MTX_SRT_ENABLED`        | Whether SRT is enabled in MediaMTX (`true`/`false`).                                               | `false`                                                                                                   |
| `MEDIA_MTX_RTSP_TCP_PORT`      | The TCP port for RTSP in MediaMTX.                                                                 | `8554`                                                                                                    |
| `MEDIA_MTX_RTSP_UDP_RTP_PORT`  | The UDP RTP port for RTSP in MediaMTX.                                                             | `8000`                                                                                                    |
| `MEDIA_MTX_RTSP_UDP_RTCP_PORT` | The UDP RTCP port for RTSP in MediaMTX.                                                            | `8001`                                                                                                    |
| `MEDIA_MTX_RTMP_PORT`          | The port for RTMP in MediaMTX.                                                                     | `1935`                                                                                                    |
| `MEDIA_MTX_HLS_PORT`           | The port for HLS in MediaMTX.                                                                      | `8888`                                                                                                    |
| `MEDIA_MTX_WEB_RTC_PORT`       | The port for WebRTC in MediaMTX.                                                                   | `8889`                                                                                                    |
| `MEDIA_MTX_WEB_RTC_UDP_PORT`   | The UDP port for WebRTC in MediaMTX.                                                               | `8189`                                                                                                    |
| `MEDIA_MTX_SRT_PORT`           | The port for SRT in MediaMTX.                                                                      | `8890`                                                                                                    |
| `GSTREAMER_BIN`                | The file path to the GStreamer executable (gst-launch-1.0).                                        | `gst-launch-1.0`                                                                                          |
| `FFMPEG_BIN`                   | The file path to the FFmpeg executable.                                                            | `ffmpeg`                                                                                                  |
| `WEBRTC_RTP_MIN_PORT`          | The minimum port range for WebRTC RTP.                                                             | `10000`                                                                                                   |
| `WEBRTC_RTP_MAX_PORT`          | The maximum port range for WebRTC RTP.                                                             | `20000`                                                                                                   |
